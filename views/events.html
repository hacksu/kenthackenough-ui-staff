<requirestaff user="ctrl.me" error="true">

  <staffheader></staffheader>

  <br>
  <!-- Errors, if there are any -->
  <div ng-if="ctrl.errors">
    <div data-alert class="alert-box alert">
      <span ng-repeat="error in ctrl.errors">{{error}}<br></span>
      <a href="#" class="close">&times;</a>
    </div>
  </div>
  <div class="row">
    <div class="small-12 columns">

      <h3>Calendar <span class="small grey">{{ctrl.events.length}} events</span></h3>

      <!-- New event -->
      <form ng-submit="ctrl.event.create()">
        <div class="row">
          <div class="small-12 columns">
            <div class="row collapse">
              <div class="small-2 columns">
                <span class="prefix">Group</span>
              </div>
              <div class="small-10 columns">
                <select ng-model="ctrl.event.new.group" required="true">
                  <option value="attendee">Attendee</option>
                  <option value="staff">Staff</option>
                  <option value="admin">Admin</option>
                </select>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="small-12 columns">
            <div class="row collapse">
              <div class="small-2 columns">
                <span class="prefix">Title</span>
              </div>
              <div class="small-10 columns">
                <input type="text" placeholder="Enter title" ng-model="ctrl.event.new.name">
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="small-12 columns">
            <div class="row collapse">

              <div class="small-12 medium-5 columns">
                <div class="small-2 column">
                  <span class="prefix">Start</span>
                </div>
                <div class="small-5 columns">
                  <input type="date" ng-model="ctrl.event.new.start" required="true">
                </div>
                <div class="small-5 columns">
                  <input type="time" ng-model="ctrl.event.new.starttime" required="true">
                </div>
              </div>

              <div class="small-12 medium-5 columns">
                <div class="small-2 columns">
                  <span class="prefix">End</span>
                </div>
                <div class="small-5 columns">
                  <input type="date" ng-model="ctrl.event.new.end" required="true">
                </div>
                <div class="small-5 columns">
                  <input type="time" ng-model="ctrl.event.new.endtime" required="true">
                </div>
              </div>

              <div class="small-6 medium-2 columns end">
                <div class="small-6 columns align-center">
                  <label for="notify" class="center inline">Notify?</label>
                </div>
                <div class="small-6 columns end">
                  <div class="switch">
                    <input type="checkbox"
                    ng-model="ctrl.event.new.notify"
                    ng-true-value="true"
                    ng-false-value="false"
                    id="notify?">
                    <label for="notify?"></label>
                  </div>
                </div>
              </div>

            </div>
          </div>
        </div>
        <div class="row">
          <div class="small-12 columns">
            <div class="row collapse">
              <div class="small-2 columns">
                <button class="button postfix">Add</button>
              </div>
            </div>
          </div>
        </div>
      </form>
      <!-- List of events -->
      <div ng-repeat="event in ctrl.events | orderBy:'start':true" class="expandable-list-item">

        <div class="row">

          <div class="small-12 columns content">
            <div class="small-6 columns">
              <span ng-bind-html="event.name|unsafe"></span>
            </div>
            <div class="small-5 columns">
              <span ng-bind-html="event.group|unsafe"></span>
            </div>
            <div class="small-2 columns align-right">
              <a ng-click="ctrl.event.delete(event)" class="black"><i class="fa fa-trash fa-2x"></i></a>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="small-12 columns content">
            <div class="small-6 columns">
              <span class="small grey">{{event.start}}</span>
            </div>
            <div class="small-6 columns align-right">
              <span class="small grey">{{event.end}}</span>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>

</requirestaff>